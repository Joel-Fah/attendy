{% extends 'core/base_app.html' %}
{% load static %}
{% load tailwind_tags %}

{# Title of the page #}
{% block title %}Lecturers{% endblock %}

{# Body styles #}
{% block body_styles %}
{% endblock body_styles %}

{# Header of the page #}
{% block header %}
{% include "components/header_app.html" %}
{% endblock header %}

{# Body of the page #}
{% block body %}
<div class="p-4 sm:ml-64">
    <div class="flex flex-col gap-4 items-center justify-between mt-14">
        <div class="flex flex-col items-start gap-2 w-full md:flex-row md:items-center md:justify-between">
            <h2 class="text-2xl">Registered lecturers</h2>
            <div class="relative w-full lg:w-1/3">
                <div class="absolute inset-y-0 start-0 flex items-center ps-2.5 pointer-events-none">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none">
                        <path d="M17.5 17.5L22 22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path
                            d="M20 11C20 6.02944 15.9706 2 11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C15.9706 20 20 15.9706 20 11Z"
                            stroke="currentColor" stroke-width="1.5" stroke-linejoin="round" />
                    </svg>
                </div>
                <input type="search" name="search_lecturers" id="search_courses" placeholder="search for a lecturer..."
                    class="w-full rounded-2xl block ps-10 p-2.5 bg-whiteColor border-darkColor placeholder-darkColor/50 focus:ring-primaryColor focus:border-primaryColor transition-all duration-300 ease-in-out">
            </div>
        </div>

        <div class="w-full flex flex-col gap-2">
            {% if lecturers.count > 0 %}
            <div class="relative overflow-x-auto">
                <table class="w-full text-sm text-left">
                    <thead class="text-primaryColor uppercase">
                        <tr class="border-b border-darkColor/10">
                            <th scope="col" class="p-4">
                                S/N
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Names
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Dep't
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Phone No
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Actions
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for lecturer in lecturers %}
                        <tr class="border-b border-darkColor/10 hover:bg-secondaryColor/5">
                            <td class="w-4 p-4">
                                {{ forloop.counter }}
                            </td>
                            <th scope="row" class="flex items-center gap-1 px-6 py-4 font-medium whitespace-nowrap">
                                {{ lecturer.name}}
                            </th>
                            <td class="px-6 py-4">
                                {{ lecturer.department }}
                            </td>
                            <td class="px-6 py-4">
                                {% if lecturer.phone %}
                                {{ lecturer.phone }}
                                {% else %}
                                N/A
                                {% endif %}
                            </td>
                            <td class="px-6 py-4">
                                <div class="flex gap-2">
                                    <a href="{% url 'core:lecturer_detail' pk=lecturer.id slug=lecturer.slug %}" class="font-medium text-primaryColor hover:underline">
                                        View
                                    </a>
            
                                    <span>|</span>
                                    
                                    <a href="#" class="font-medium text-primaryColor hover:underline">
                                        Edit
                                    </a>

                                    <span>|</span>

                                    <a href="#" class="font-medium text-danger hover:underline">
                                        Delete
                                    </a>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <nav class="flex items-center flex-column flex-wrap md:flex-row justify-between pt-4" aria-label="Table navigation">
                    <span class="text-sm font-normal text-gray-500 mb-4 md:mb-0 block w-full md:inline md:w-auto">
                        Showing 
                        <span class="font-semibold text-primaryColor">{{ page_obj.start_index }}-{{ page_obj.end_index }}</span> 
                        of 
                        <span class="font-semibold text-primaryColor">{{ page_obj.paginator.count }}</span>
                    </span>
                        
                        {% if is_paginated %}
                        <ul class="inline-flex -space-x-px text-sm h-8">
                            {% if page_obj.has_previous %}
                                <li>
                                    <a href="?page={{ page_obj.previous_page_number }}" class="flex items-center justify-center px-3 h-8 ms-0 leading-tight text-gray-500 bg-whiteColor border border-gray-300 rounded-s-lg hover:bg-primaryColor/5 hover:text-gray-700">Previous</a>
                                </li>
                            {% else %}
                                <li>
                                    <span class="flex items-center justify-center px-3 h-8 ms-0 leading-tight text-gray-500 bg-whiteColor border border-gray-300 rounded-s-lg cursor-not-allowed">Previous</span>
                                </li>
                            {% endif %}
                    
                            {% for num in page_obj.paginator.page_range %}
                                {% if page_obj.number == num %}
                                    <li>
                                        <a href="?page={{ num }}" aria-current="page" class="flex items-center justify-center px-3 h-8 text-secondaryColor border border-gray-300 bg-secondaryColor/5 hover:bg-secondaryColor/10 hover:text-orange-600">{{ num }}</a>
                                    </li>
                                {% else %}
                                    <li>
                                        <a href="?page={{ num }}" class="flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-whiteColor border border-gray-300 hover:bg-primaryColor/5 hover:text-gray-700">{{ num }}</a>
                                    </li>
                                {% endif %}
                            {% endfor %}
                    
                            {% if page_obj.has_next %}
                                <li>
                                    <a href="?page={{ page_obj.next_page_number }}" class="flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-whiteColor border border-gray-300 rounded-e-lg hover:bg-primaryColor/5 hover:text-gray-700">Next</a>
                                </li>
                            {% else %}
                                <li>
                                    <span class="flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-whiteColor border border-gray-300 rounded-e-lg cursor-not-allowed">Next</span>
                                </li>
                            {% endif %}
                        </ul>
                    {% endif %}
                </nav>
            </div>
              {% else %}
            <p class="text-lg">No lecturers have been registered yet.</p>
            {% endif %}
        </>
    </div>

    <div title="Add a lecturer" 
    class="fixed p-3 bottom-2 right-2 flex items-center justify-center bg-primaryColor rounded-2xl shadow-md text-whiteColor">
        <a href="{% url 'core:lecturer_add' %}">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none">
                <path d="M12 4V20M20 12H4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
        </a>
    </div>
</div>

{% include "components/message.html" %}
{% endblock body %}

{# Additional javascript #}
{% block javascript %}
{% endblock javascript %}